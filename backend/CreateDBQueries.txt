CREATE DATABASE `mymobileservice` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci */ /*!80016 DEFAULT ENCRYPTION='N' */;

CREATE TABLE `plans` (
  `planid` varchar(10) NOT NULL DEFAULT '1',
  `name` varchar(45) DEFAULT NULL,
  `price` double NOT NULL DEFAULT '35',
  `linelimit` int DEFAULT NULL,
  `extraline` double DEFAULT '10',
  PRIMARY KEY (`planid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `phoneinfo` (
  `phoneid` int NOT NULL DEFAULT '1',
  `manufacterer` varchar(45) DEFAULT NULL,
  `model` varchar(45) DEFAULT NULL,
  `memory` varchar(45) DEFAULT NULL,
  `price` double NOT NULL DEFAULT '1',
  PRIMARY KEY (`phoneid`),
  UNIQUE KEY `phoneid_UNIQUE` (`phoneid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='phone information in the database';

CREATE TABLE `phonelines` (
  `phonenumber` varchar(10) NOT NULL DEFAULT '1111111111',
  `accountid` int DEFAULT NULL,
  `phoneid` int DEFAULT NULL,
  `calleridname` varchar(45) DEFAULT NULL,
  `remphonebal` double NOT NULL DEFAULT '0',
  `plan` varchar(450) DEFAULT NULL,
  PRIMARY KEY (`phonenumber`),
  UNIQUE KEY `phonenumber_UNIQUE` (`phonenumber`),
  KEY `phoneid_idx` (`phoneid`),
  KEY `plan_idx` (`plan`),
  CONSTRAINT `phoneid` FOREIGN KEY (`phoneid`) REFERENCES `phoneinfo` (`phoneid`),
  CONSTRAINT `planid` FOREIGN KEY (`plan`) REFERENCES `plans` (`planid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='list of lines per account';

CREATE TABLE `account` (
  `id` int NOT NULL AUTO_INCREMENT,
  `firstname` varchar(45) DEFAULT NULL,
  `lastname` varchar(45) DEFAULT NULL,
  `address` varchar(45) DEFAULT NULL,
  `address2` varchar(45) DEFAULT NULL,
  `city` varchar(45) DEFAULT NULL,
  `state` varchar(2) DEFAULT NULL,
  `zipcode` int DEFAULT NULL,
  `lines` varchar(450) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id_UNIQUE` (`id`),
  KEY `phonenumber_idx` (`lines`),
  CONSTRAINT `phonenumber` FOREIGN KEY (`lines`) REFERENCES `phonelines` (`phonenumber`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='accounts for mymobileservice';

CREATE TABLE `mymobileservice`.`logword` (
  `logid` VARCHAR(20) NOT NULL,
  `logword` VARCHAR(25) NOT NULL,
  `accountid` INT NOT NULL,
  PRIMARY KEY (`logid`),
  UNIQUE INDEX `logid_UNIQUE` (`logid` ASC) VISIBLE,
  UNIQUE INDEX `accountid_UNIQUE` (`accountid` ASC) VISIBLE,
  CONSTRAINT `accountid`
    FOREIGN KEY (`accountid`)
    REFERENCES `mymobileservice`.`account` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


INSERT INTO plans(planid,name,price,linelimit,extraline,aboveextraline) 
VALUES (1, "MORE POWER", 80.00, 8, 10.00, 20.00); 

INSERT INTO plans(planid,name,price,linelimit,extraline,aboveextraline) 
VALUES (2, "UNLIMITED SUPERIOR", 50.00, 5, 15.00, 30.00); 

INSERT INTO plans(planid,name,price,linelimit,extraline,aboveextraline) 
VALUES (3, "UNLIMITED SPECIAL", 40.00, 4, 20.00, 40.00); 

INSERT INTO plans(planid,name,price,linelimit,extraline,aboveextraline) 
VALUES (4, "UNLIMITED PIONEER", 35.00, 3, 20.00, 40.00); 

INSERT INTO phoneinfo(phoneid,manufacterer,model, memory,price) 
VALUES (1, "Apple", "iPhone 14", "256GB" , 780.00); 

INSERT INTO phoneinfo(phoneid,manufacterer,model, memory,price) 
VALUES (2, "Apple", "iPhone 14", "512GB" , 860.00); 

INSERT INTO phoneinfo(phoneid,manufacterer,model, memory,price) 
VALUES (3, "Samsung", "S22", "128GB" , 600.00); 

INSERT INTO phoneinfo(phoneid,manufacterer,model, memory,price) 
VALUES (4, "Samsung", "S22", "256GB" , 834.00); 

INSERT INTO phoneinfo(phoneid,manufacterer,model, memory,price) 
VALUES (5, "Samsung", "S23", "256GB" , 900.00); 

INSERT INTO phoneinfo(phoneid,manufacterer,model, memory,price) 
VALUES (6, "Samsung", "S23", "512GB" , 1049.00); 



